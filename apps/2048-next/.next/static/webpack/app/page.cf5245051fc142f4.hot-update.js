"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/hooks/useGame.ts":
/*!******************************!*\
  !*** ./app/hooks/useGame.ts ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGame: () => (/* binding */ useGame)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.3.2_@babel+core@7.2_d32cf3ae86630254ac5edcd85152c69f/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! shared-2048-logic/utils/moveLogic */ \"(app-pages-browser)/../../packages/shared-2048-logic/src/utils/moveLogic.ts\");\n/* harmony import */ var shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared-2048-logic/utils/gameLogic */ \"(app-pages-browser)/../../packages/shared-2048-logic/src/utils/gameLogic.ts\");\n/* harmony import */ var shared_2048_logic_utils_seededRandom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared-2048-logic/utils/seededRandom */ \"(app-pages-browser)/../../packages/shared-2048-logic/src/utils/seededRandom.ts\");\n/* __next_internal_client_entry_do_not_use__ useGame auto */ \n\n\n\nfunction findNewTile(before, after) {\n    const beforeIds = new Set(before.map((tile)=>tile.id));\n    return after.find((tile)=>!beforeIds.has(tile.id)) || null;\n}\nconst loadBestScore = ()=>{\n    const saved = localStorage.getItem('bestScore');\n    return saved ? Number(saved) : 0;\n};\nconst useGame = ()=>{\n    const [score, setScore] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [moves, setMoves] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [bestScore, setBestScore] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [tiles, setTiles] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [gameOver, setGameOver] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [undoHistory, setUndoHistory] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [undosLeft, setUndosLeft] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [maxUndos] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(2);\n    const [moveHistory, setMoveHistory] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [seed, setSeed] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n    const rngRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const isMoving = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const resumeGame = (gameState)=>{\n        setMoves(gameState.moves);\n        setScore(gameState.score);\n        setUndosLeft(gameState.undosLeft);\n        setTiles(gameState.tiles);\n        setGameOver(gameState.gameOver);\n        setUndoHistory(gameState.undoHistory);\n        setSeed(gameState.seed);\n        const savedScore = loadBestScore();\n        if (savedScore) setBestScore(Number(savedScore));\n    };\n    const resetGame = ()=>{\n        localStorage.setItem(\"gameState\", '{}');\n        const [seed, rng] = (0,shared_2048_logic_utils_seededRandom__WEBPACK_IMPORTED_MODULE_3__.generateSeed)();\n        setSeed(seed);\n        setMoves(0);\n        setScore(0);\n        setUndosLeft(maxUndos);\n        const { tiles, initialTiles } = (0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.initializeBoard)(seed);\n        setTiles(tiles);\n        setMoveHistory(initialTiles.map((tile)=>({\n                type: 'init',\n                move: undefined,\n                spawnedTile: tile\n            })));\n        setGameOver(false);\n        setUndoHistory([]);\n        const savedScore = loadBestScore();\n        if (savedScore) setBestScore(Number(savedScore));\n    };\n    const handleUndo = ()=>{\n        if (undosLeft === 0 || undoHistory.length === 0) return;\n        const lastState = undoHistory[undoHistory.length - 1];\n        setTiles(lastState.tiles);\n        setScore(lastState.score);\n        setMoves(lastState.moves);\n        setUndoHistory((prev)=>prev.slice(0, -1));\n        setMoveHistory((prev)=>prev.slice(0, -1));\n        setUndosLeft((u)=>u - 1);\n        setGameOver(false);\n    };\n    const handleMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGame.useCallback[handleMove]\": (direction)=>{\n            if (isMoving.current) return;\n            if (gameOver) return;\n            isMoving.current = true;\n            const cleanedTiles = (0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.cleanUpTiles)(tiles);\n            let result;\n            const previousState = {\n                tiles: [\n                    ...tiles\n                ],\n                score,\n                moves\n            };\n            switch(direction){\n                case 'up':\n                case 'w':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveUp)(cleanedTiles);\n                    break;\n                case 'down':\n                case 's':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveDown)(cleanedTiles);\n                    break;\n                case 'left':\n                case 'a':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveLeft)(cleanedTiles);\n                    break;\n                case 'right':\n                case 'd':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveRight)(cleanedTiles);\n                    break;\n                default:\n                    return;\n            }\n            if (result.moved) {\n                const hasNew128 = result.tiles.some({\n                    \"useGame.useCallback[handleMove].hasNew128\": (t)=>t.value === 128 && t.isMerged\n                }[\"useGame.useCallback[handleMove].hasNew128\"]);\n                if (hasNew128) {\n                    setUndosLeft({\n                        \"useGame.useCallback[handleMove]\": (prev)=>Math.min(prev + 1, maxUndos)\n                    }[\"useGame.useCallback[handleMove]\"]);\n                }\n                setUndoHistory({\n                    \"useGame.useCallback[handleMove]\": (prev)=>{\n                        const newHistory = [\n                            ...prev,\n                            previousState\n                        ];\n                        return newHistory.slice(-maxUndos); // Keep only last 2 moves\n                    }\n                }[\"useGame.useCallback[handleMove]\"]);\n                setMoves({\n                    \"useGame.useCallback[handleMove]\": (m)=>m + 1\n                }[\"useGame.useCallback[handleMove]\"]);\n                setScore({\n                    \"useGame.useCallback[handleMove]\": (s)=>{\n                        const newScore = s + result.score;\n                        if (newScore > bestScore) {\n                            setBestScore(newScore);\n                            localStorage.setItem('bestScore', newScore.toString());\n                        }\n                        return newScore;\n                    }\n                }[\"useGame.useCallback[handleMove]\"]);\n                // const rng = getRng(seed);\n                const withNewTile = rngRef.current ? (0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.generateRandomTile)(result.tiles, rngRef.current) : result.tiles;\n                // Track the new tile if it was generated\n                setTiles(withNewTile);\n                // Check game over after move\n                if ((0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.isGameOver)(withNewTile)) {\n                    setGameOver(true);\n                }\n                const spawnedTile = findNewTile(result.tiles, withNewTile);\n                if (spawnedTile) {\n                    setMoveHistory({\n                        \"useGame.useCallback[handleMove]\": (prev)=>[\n                                ...prev,\n                                {\n                                    type: 'move',\n                                    move: direction,\n                                    spawnedTile: spawnedTile\n                                }\n                            ]\n                    }[\"useGame.useCallback[handleMove]\"]);\n                }\n                isMoving.current = false;\n            } else {\n                if ((0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.isGameOver)(cleanedTiles)) {\n                    setGameOver(true);\n                }\n                isMoving.current = false;\n            }\n        }\n    }[\"useGame.useCallback[handleMove]\"], [\n        tiles,\n        bestScore,\n        moves,\n        maxUndos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            if (seed) {\n                rngRef.current = (0,shared_2048_logic_utils_seededRandom__WEBPACK_IMPORTED_MODULE_3__.getRng)(seed);\n            }\n        }\n    }[\"useGame.useEffect\"], [\n        seed\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"useGame.useEffect.handleKeyDown\": (e)=>{\n                    if (![\n                        'ArrowUp',\n                        'ArrowDown',\n                        'ArrowLeft',\n                        'ArrowRight',\n                        'w',\n                        's',\n                        'a',\n                        'd'\n                    ].includes(e.key)) return;\n                    e.preventDefault();\n                    handleMove(e.key.replace('Arrow', '').toLowerCase());\n                }\n            }[\"useGame.useEffect.handleKeyDown\"];\n            window.addEventListener('keydown', handleKeyDown);\n            return ({\n                \"useGame.useEffect\": ()=>window.removeEventListener('keydown', handleKeyDown)\n            })[\"useGame.useEffect\"];\n        }\n    }[\"useGame.useEffect\"], [\n        handleMove\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const savedState = localStorage.getItem('gameState');\n            if (!savedState) {\n                resetGame();\n                return;\n            }\n            if (savedState) {\n                const parsedObject = JSON.parse(savedState.toString());\n                if (parsedObject.score == 0) {\n                    resetGame();\n                    return;\n                }\n                resumeGame(parsedObject);\n            }\n        }\n    }[\"useGame.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const currentState = {\n                tiles: [\n                    ...tiles\n                ],\n                score,\n                moves,\n                undosLeft,\n                undoHistory,\n                gameOver,\n                seed\n            };\n            if (currentState.score > 0) localStorage.setItem('gameState', JSON.stringify(currentState));\n        }\n    }[\"useGame.useEffect\"], [\n        tiles,\n        score,\n        moves,\n        undoHistory,\n        undosLeft,\n        gameOver\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const savedHistory = localStorage.getItem('moveHistory');\n            if (savedHistory) {\n                setMoveHistory(JSON.parse(savedHistory));\n            }\n        }\n    }[\"useGame.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            localStorage.setItem('moveHistory', JSON.stringify(moveHistory));\n        }\n    }[\"useGame.useEffect\"], [\n        moveHistory\n    ]);\n    return {\n        tiles,\n        score,\n        bestScore,\n        gameOver,\n        moves,\n        moveHistory,\n        seed,\n        handleUndo,\n        undosLeft,\n        resetGame\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLQyxLQUFLLENBQUNHO1lBQzVCO1FBQ0Y7NEJBQUcsRUFBRTtJQUVMdkcsZ0RBQVNBOzZCQUFDO1lBQ1J5QixhQUFhNkIsT0FBTyxDQUFDLGVBQWU2QyxLQUFLRyxTQUFTLENBQUMxRDtRQUNyRDs0QkFBRztRQUFDQTtLQUFZO0lBR2hCLE9BQU87UUFDTFQ7UUFDQU47UUFDQUk7UUFDQUk7UUFDQU47UUFDQWE7UUFDQUU7UUFDQWU7UUFDQXBCO1FBQ0FZO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXERlbWV0cmlvUVxcRGVza3RvcFxcUHJvamVjdHNcXDIwNDgtbmV4dC1leHByZXNzXFxhcHBzXFwyMDQ4LW5leHRcXGFwcFxcaG9va3NcXHVzZUdhbWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCI7XHJcblxyXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBtb3ZlVXAsIG1vdmVEb3duLCBtb3ZlTGVmdCwgbW92ZVJpZ2h0IH0gZnJvbSAnc2hhcmVkLTIwNDgtbG9naWMvdXRpbHMvbW92ZUxvZ2ljJztcclxuaW1wb3J0IHsgaW5pdGlhbGl6ZUJvYXJkLCBnZW5lcmF0ZVJhbmRvbVRpbGUsIGNsZWFuVXBUaWxlcywgaXNHYW1lT3ZlciB9IGZyb20gJ3NoYXJlZC0yMDQ4LWxvZ2ljL3V0aWxzL2dhbWVMb2dpYyc7XHJcbmltcG9ydCB7IEdhbWVIaXN0b3J5LCBUaWxlTW92ZSwgR2FtZVN0YXRlLCBUaWxlRGF0YSB9IGZyb20gJ3NoYXJlZC0yMDQ4LWxvZ2ljL3R5cGVzJztcclxuaW1wb3J0IHsgZ2VuZXJhdGVTZWVkLCBnZXRSbmcgfSBmcm9tICdzaGFyZWQtMjA0OC1sb2dpYy91dGlscy9zZWVkZWRSYW5kb20nO1xyXG5pbXBvcnQgc2VlZHJhbmRvbSBmcm9tICdzZWVkcmFuZG9tJztcclxuXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGZpbmROZXdUaWxlKGJlZm9yZTogVGlsZURhdGFbXSwgYWZ0ZXI6IFRpbGVEYXRhW10pOiBUaWxlRGF0YSB8IG51bGwge1xyXG4gIGNvbnN0IGJlZm9yZUlkcyA9IG5ldyBTZXQoYmVmb3JlLm1hcCh0aWxlID0+IHRpbGUuaWQpKTtcclxuICByZXR1cm4gYWZ0ZXIuZmluZCh0aWxlID0+ICFiZWZvcmVJZHMuaGFzKHRpbGUuaWQpKSB8fCBudWxsO1xyXG59XHJcblxyXG5jb25zdCBsb2FkQmVzdFNjb3JlID0gKCkgPT4ge1xyXG4gIGNvbnN0IHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpO1xyXG4gIHJldHVybiBzYXZlZCA/IE51bWJlcihzYXZlZCkgOiAwO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IHVzZUdhbWUgPSAoKSA9PiB7XHJcblxyXG4gIGNvbnN0IFtzY29yZSwgc2V0U2NvcmVdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgW21vdmVzLCBzZXRNb3Zlc10gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBbYmVzdFNjb3JlLCBzZXRCZXN0U2NvcmVdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgW3RpbGVzLCBzZXRUaWxlc10gPSB1c2VTdGF0ZTxUaWxlRGF0YVtdPihbXSk7XHJcbiAgY29uc3QgW2dhbWVPdmVyLCBzZXRHYW1lT3Zlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgY29uc3QgW3VuZG9IaXN0b3J5LCBzZXRVbmRvSGlzdG9yeV0gPSB1c2VTdGF0ZTxHYW1lSGlzdG9yeVtdPihbXSk7XHJcbiAgY29uc3QgW3VuZG9zTGVmdCwgc2V0VW5kb3NMZWZ0XSA9IHVzZVN0YXRlKDApO1xyXG4gIGNvbnN0IFttYXhVbmRvc10gPSB1c2VTdGF0ZSgyKTtcclxuICBjb25zdCBbbW92ZUhpc3RvcnksIHNldE1vdmVIaXN0b3J5XSA9IHVzZVN0YXRlPFRpbGVNb3ZlW10+KFtdKTtcclxuICBjb25zdCBbc2VlZCwgc2V0U2VlZF0gPSB1c2VTdGF0ZSgnJyk7XHJcbiAgY29uc3Qgcm5nUmVmID0gdXNlUmVmPHNlZWRyYW5kb20uUFJORyB8IG51bGw+KG51bGwpO1xyXG5cclxuICBjb25zdCBpc01vdmluZyA9IHVzZVJlZihmYWxzZSk7XHJcblxyXG5cclxuICBjb25zdCByZXN1bWVHYW1lID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlKSA9PiB7XHJcbiAgICBzZXRNb3ZlcyhnYW1lU3RhdGUubW92ZXMpO1xyXG4gICAgc2V0U2NvcmUoZ2FtZVN0YXRlLnNjb3JlKTtcclxuICAgIHNldFVuZG9zTGVmdChnYW1lU3RhdGUudW5kb3NMZWZ0KTtcclxuICAgIHNldFRpbGVzKGdhbWVTdGF0ZS50aWxlcyk7XHJcbiAgICBzZXRHYW1lT3ZlcihnYW1lU3RhdGUuZ2FtZU92ZXIpO1xyXG4gICAgc2V0VW5kb0hpc3RvcnkoZ2FtZVN0YXRlLnVuZG9IaXN0b3J5KTtcclxuICAgIHNldFNlZWQoZ2FtZVN0YXRlLnNlZWQpO1xyXG4gICAgY29uc3Qgc2F2ZWRTY29yZSA9IGxvYWRCZXN0U2NvcmUoKTtcclxuICAgIGlmIChzYXZlZFNjb3JlKSBzZXRCZXN0U2NvcmUoTnVtYmVyKHNhdmVkU2NvcmUpKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHJlc2V0R2FtZSA9ICgpID0+IHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZ2FtZVN0YXRlXCIsICd7fScpXHJcbiAgICBjb25zdCBbc2VlZCwgcm5nXSA9IGdlbmVyYXRlU2VlZCgpO1xyXG4gICAgc2V0U2VlZChzZWVkKVxyXG4gICAgc2V0TW92ZXMoMCk7XHJcbiAgICBzZXRTY29yZSgwKTtcclxuICAgIHNldFVuZG9zTGVmdChtYXhVbmRvcyk7XHJcbiAgICBjb25zdCB7IHRpbGVzLCBpbml0aWFsVGlsZXMgfSA9IGluaXRpYWxpemVCb2FyZChzZWVkKTtcclxuICAgIHNldFRpbGVzKHRpbGVzKTtcclxuICAgIHNldE1vdmVIaXN0b3J5KGluaXRpYWxUaWxlcy5tYXAodGlsZSA9PiAoe1xyXG4gICAgICB0eXBlOiAnaW5pdCcsXHJcbiAgICAgIG1vdmU6IHVuZGVmaW5lZCxcclxuICAgICAgc3Bhd25lZFRpbGU6IHRpbGVcclxuICAgIH0gYXMgVGlsZU1vdmUpKSk7XHJcblxyXG4gICAgc2V0R2FtZU92ZXIoZmFsc2UpO1xyXG4gICAgc2V0VW5kb0hpc3RvcnkoW10pO1xyXG4gICAgY29uc3Qgc2F2ZWRTY29yZSA9IGxvYWRCZXN0U2NvcmUoKTtcclxuICAgIGlmIChzYXZlZFNjb3JlKSBzZXRCZXN0U2NvcmUoTnVtYmVyKHNhdmVkU2NvcmUpKTtcclxuXHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlVW5kbyA9ICgpID0+IHtcclxuICAgIGlmICh1bmRvc0xlZnQgPT09IDAgfHwgdW5kb0hpc3RvcnkubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgbGFzdFN0YXRlID0gdW5kb0hpc3RvcnlbdW5kb0hpc3RvcnkubGVuZ3RoIC0gMV07XHJcbiAgICBzZXRUaWxlcyhsYXN0U3RhdGUudGlsZXMpO1xyXG4gICAgc2V0U2NvcmUobGFzdFN0YXRlLnNjb3JlKTtcclxuICAgIHNldE1vdmVzKGxhc3RTdGF0ZS5tb3Zlcyk7XHJcbiAgICBzZXRVbmRvSGlzdG9yeShwcmV2ID0+IHByZXYuc2xpY2UoMCwgLTEpKTtcclxuICAgIHNldE1vdmVIaXN0b3J5KHByZXYgPT4gcHJldi5zbGljZSgwLCAtMSkpO1xyXG4gICAgc2V0VW5kb3NMZWZ0KHUgPT4gdSAtIDEpO1xyXG4gICAgc2V0R2FtZU92ZXIoZmFsc2UpO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IGhhbmRsZU1vdmUgPSB1c2VDYWxsYmFjaygoZGlyZWN0aW9uOiBzdHJpbmcpID0+IHtcclxuICAgIGlmIChpc01vdmluZy5jdXJyZW50KSByZXR1cm47XHJcbiAgICBpZiAoZ2FtZU92ZXIpIHJldHVybjtcclxuXHJcbiAgICBpc01vdmluZy5jdXJyZW50ID0gdHJ1ZTtcclxuICAgIGNvbnN0IGNsZWFuZWRUaWxlcyA9IGNsZWFuVXBUaWxlcyh0aWxlcyk7XHJcbiAgICBsZXQgcmVzdWx0OiBhbnk7XHJcblxyXG4gICAgY29uc3QgcHJldmlvdXNTdGF0ZTogR2FtZUhpc3RvcnkgPSB7XHJcbiAgICAgIHRpbGVzOiBbLi4udGlsZXNdLFxyXG4gICAgICBzY29yZSxcclxuICAgICAgbW92ZXMsXHJcbiAgICB9O1xyXG5cclxuICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgIGNhc2UgJ3VwJzogY2FzZSAndyc6IHJlc3VsdCA9IG1vdmVVcChjbGVhbmVkVGlsZXMpOyBicmVhaztcclxuICAgICAgY2FzZSAnZG93bic6IGNhc2UgJ3MnOiByZXN1bHQgPSBtb3ZlRG93bihjbGVhbmVkVGlsZXMpOyBicmVhaztcclxuICAgICAgY2FzZSAnbGVmdCc6IGNhc2UgJ2EnOiByZXN1bHQgPSBtb3ZlTGVmdChjbGVhbmVkVGlsZXMpOyBicmVhaztcclxuICAgICAgY2FzZSAncmlnaHQnOiBjYXNlICdkJzogcmVzdWx0ID0gbW92ZVJpZ2h0KGNsZWFuZWRUaWxlcyk7IGJyZWFrO1xyXG4gICAgICBkZWZhdWx0OiByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlc3VsdC5tb3ZlZCkge1xyXG4gICAgICBjb25zdCBoYXNOZXcxMjggPSByZXN1bHQudGlsZXMuc29tZSgodDogVGlsZURhdGEpID0+XHJcbiAgICAgICAgdC52YWx1ZSA9PT0gMTI4ICYmIHQuaXNNZXJnZWRcclxuICAgICAgKTtcclxuICAgICAgaWYgKGhhc05ldzEyOCkge1xyXG4gICAgICAgIHNldFVuZG9zTGVmdChwcmV2ID0+IE1hdGgubWluKHByZXYgKyAxLCBtYXhVbmRvcykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRVbmRvSGlzdG9yeShwcmV2ID0+IHtcclxuICAgICAgICBjb25zdCBuZXdIaXN0b3J5ID0gWy4uLnByZXYsIHByZXZpb3VzU3RhdGVdO1xyXG4gICAgICAgIHJldHVybiBuZXdIaXN0b3J5LnNsaWNlKC1tYXhVbmRvcyk7IC8vIEtlZXAgb25seSBsYXN0IDIgbW92ZXNcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBzZXRNb3ZlcyhtID0+IG0gKyAxKVxyXG5cclxuICAgICAgc2V0U2NvcmUocyA9PiB7XHJcbiAgICAgICAgY29uc3QgbmV3U2NvcmUgPSBzICsgcmVzdWx0LnNjb3JlO1xyXG4gICAgICAgIGlmIChuZXdTY29yZSA+IGJlc3RTY29yZSkge1xyXG4gICAgICAgICAgc2V0QmVzdFNjb3JlKG5ld1Njb3JlKTtcclxuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiZXN0U2NvcmUnLCBuZXdTY29yZS50b1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld1Njb3JlO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIGNvbnN0IHJuZyA9IGdldFJuZyhzZWVkKTtcclxuICAgICAgY29uc3Qgd2l0aE5ld1RpbGUgPSBybmdSZWYuY3VycmVudCA/IGdlbmVyYXRlUmFuZG9tVGlsZShyZXN1bHQudGlsZXMsIHJuZ1JlZi5jdXJyZW50KSA6IHJlc3VsdC50aWxlcztcclxuICAgICAgLy8gVHJhY2sgdGhlIG5ldyB0aWxlIGlmIGl0IHdhcyBnZW5lcmF0ZWRcclxuICAgICAgc2V0VGlsZXMod2l0aE5ld1RpbGUpO1xyXG4gICAgICAvLyBDaGVjayBnYW1lIG92ZXIgYWZ0ZXIgbW92ZVxyXG4gICAgICBpZiAoaXNHYW1lT3Zlcih3aXRoTmV3VGlsZSkpIHtcclxuICAgICAgICBzZXRHYW1lT3Zlcih0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgc3Bhd25lZFRpbGUgPSBmaW5kTmV3VGlsZShyZXN1bHQudGlsZXMsIHdpdGhOZXdUaWxlKTtcclxuICAgICAgaWYgKHNwYXduZWRUaWxlKSB7XHJcbiAgICAgICAgc2V0TW92ZUhpc3RvcnkocHJldiA9PiBbXHJcbiAgICAgICAgICAuLi5wcmV2LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiAnbW92ZScsXHJcbiAgICAgICAgICAgIG1vdmU6IGRpcmVjdGlvbiBhcyAndXAnIHwgJ2Rvd24nIHwgJ2xlZnQnIHwgJ3JpZ2h0JyxcclxuICAgICAgICAgICAgc3Bhd25lZFRpbGU6IHNwYXduZWRUaWxlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSk7XHJcbiAgICAgIH1cclxuXHJcblxyXG4gICAgICBpc01vdmluZy5jdXJyZW50ID0gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoaXNHYW1lT3ZlcihjbGVhbmVkVGlsZXMpKSB7XHJcbiAgICAgICAgc2V0R2FtZU92ZXIodHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaXNNb3ZpbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICB9LCBbdGlsZXMsIGJlc3RTY29yZSwgbW92ZXMsIG1heFVuZG9zXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAoc2VlZCkge1xyXG4gICAgICBybmdSZWYuY3VycmVudCA9IGdldFJuZyhzZWVkKTtcclxuICAgIH1cclxuICB9LCBbc2VlZF0pO1xyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICBpZiAoIVsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnLCAndycsICdzJywgJ2EnLCAnZCddLmluY2x1ZGVzKGUua2V5KSkgcmV0dXJuO1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGhhbmRsZU1vdmUoZS5rZXkucmVwbGFjZSgnQXJyb3cnLCAnJykudG9Mb3dlckNhc2UoKSk7XHJcbiAgICB9O1xyXG5cclxuXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcclxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xyXG4gIH0sIFtoYW5kbGVNb3ZlXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBzYXZlZFN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dhbWVTdGF0ZScpO1xyXG4gICAgaWYgKCFzYXZlZFN0YXRlKSB7XHJcbiAgICAgIHJlc2V0R2FtZSgpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNhdmVkU3RhdGUpIHtcclxuICAgICAgY29uc3QgcGFyc2VkT2JqZWN0ID0gSlNPTi5wYXJzZShzYXZlZFN0YXRlLnRvU3RyaW5nKCkpIGFzIEdhbWVTdGF0ZTtcclxuXHJcbiAgICAgIGlmIChwYXJzZWRPYmplY3Quc2NvcmUgPT0gMCkge1xyXG4gICAgICAgIHJlc2V0R2FtZSgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzdW1lR2FtZShwYXJzZWRPYmplY3QpO1xyXG5cclxuICAgIH1cclxuXHJcbiAgfSwgW10pO1xyXG5cclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IGN1cnJlbnRTdGF0ZTogR2FtZVN0YXRlID0ge1xyXG4gICAgICB0aWxlczogWy4uLnRpbGVzXSxcclxuICAgICAgc2NvcmUsXHJcbiAgICAgIG1vdmVzLFxyXG4gICAgICB1bmRvc0xlZnQsXHJcbiAgICAgIHVuZG9IaXN0b3J5LFxyXG4gICAgICBnYW1lT3ZlcixcclxuICAgICAgc2VlZCxcclxuICAgIH07XHJcbiAgICBpZiAoY3VycmVudFN0YXRlLnNjb3JlID4gMCkgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dhbWVTdGF0ZScsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTdGF0ZSkpO1xyXG5cclxuICB9LCBbdGlsZXMsIHNjb3JlLCBtb3ZlcywgdW5kb0hpc3RvcnksIHVuZG9zTGVmdCwgZ2FtZU92ZXJdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGNvbnN0IHNhdmVkSGlzdG9yeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtb3ZlSGlzdG9yeScpO1xyXG4gICAgaWYgKHNhdmVkSGlzdG9yeSkge1xyXG4gICAgICBzZXRNb3ZlSGlzdG9yeShKU09OLnBhcnNlKHNhdmVkSGlzdG9yeSkpO1xyXG4gICAgfVxyXG4gIH0sIFtdKTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdtb3ZlSGlzdG9yeScsIEpTT04uc3RyaW5naWZ5KG1vdmVIaXN0b3J5KSk7XHJcbiAgfSwgW21vdmVIaXN0b3J5XSk7XHJcblxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdGlsZXMsXHJcbiAgICBzY29yZSxcclxuICAgIGJlc3RTY29yZSxcclxuICAgIGdhbWVPdmVyLFxyXG4gICAgbW92ZXMsXHJcbiAgICBtb3ZlSGlzdG9yeSxcclxuICAgIHNlZWQsXHJcbiAgICBoYW5kbGVVbmRvLFxyXG4gICAgdW5kb3NMZWZ0LFxyXG4gICAgcmVzZXRHYW1lXHJcbiAgfTtcclxufTsiXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIm1vdmVVcCIsIm1vdmVEb3duIiwibW92ZUxlZnQiLCJtb3ZlUmlnaHQiLCJpbml0aWFsaXplQm9hcmQiLCJnZW5lcmF0ZVJhbmRvbVRpbGUiLCJjbGVhblVwVGlsZXMiLCJpc0dhbWVPdmVyIiwiZ2VuZXJhdGVTZWVkIiwiZ2V0Um5nIiwiZmluZE5ld1RpbGUiLCJiZWZvcmUiLCJhZnRlciIsImJlZm9yZUlkcyIsIlNldCIsIm1hcCIsInRpbGUiLCJpZCIsImZpbmQiLCJoYXMiLCJsb2FkQmVzdFNjb3JlIiwic2F2ZWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiTnVtYmVyIiwidXNlR2FtZSIsInNjb3JlIiwic2V0U2NvcmUiLCJtb3ZlcyIsInNldE1vdmVzIiwiYmVzdFNjb3JlIiwic2V0QmVzdFNjb3JlIiwidGlsZXMiLCJzZXRUaWxlcyIsImdhbWVPdmVyIiwic2V0R2FtZU92ZXIiLCJ1bmRvSGlzdG9yeSIsInNldFVuZG9IaXN0b3J5IiwidW5kb3NMZWZ0Iiwic2V0VW5kb3NMZWZ0IiwibWF4VW5kb3MiLCJtb3ZlSGlzdG9yeSIsInNldE1vdmVIaXN0b3J5Iiwic2VlZCIsInNldFNlZWQiLCJybmdSZWYiLCJpc01vdmluZyIsInJlc3VtZUdhbWUiLCJnYW1lU3RhdGUiLCJzYXZlZFNjb3JlIiwicmVzZXRHYW1lIiwic2V0SXRlbSIsInJuZyIsImluaXRpYWxUaWxlcyIsInR5cGUiLCJtb3ZlIiwidW5kZWZpbmVkIiwic3Bhd25lZFRpbGUiLCJoYW5kbGVVbmRvIiwibGVuZ3RoIiwibGFzdFN0YXRlIiwicHJldiIsInNsaWNlIiwidSIsImhhbmRsZU1vdmUiLCJkaXJlY3Rpb24iLCJjdXJyZW50IiwiY2xlYW5lZFRpbGVzIiwicmVzdWx0IiwicHJldmlvdXNTdGF0ZSIsIm1vdmVkIiwiaGFzTmV3MTI4Iiwic29tZSIsInQiLCJ2YWx1ZSIsImlzTWVyZ2VkIiwiTWF0aCIsIm1pbiIsIm5ld0hpc3RvcnkiLCJtIiwicyIsIm5ld1Njb3JlIiwidG9TdHJpbmciLCJ3aXRoTmV3VGlsZSIsImhhbmRsZUtleURvd24iLCJlIiwiaW5jbHVkZXMiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2F2ZWRTdGF0ZSIsInBhcnNlZE9iamVjdCIsIkpTT04iLCJwYXJzZSIsImN1cnJlbnRTdGF0ZSIsInN0cmluZ2lmeSIsInNhdmVkSGlzdG9yeSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/hooks/useGame.ts\n"));

/***/ })

});