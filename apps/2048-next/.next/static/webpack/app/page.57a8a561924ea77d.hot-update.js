"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/hooks/useGame.ts":
/*!******************************!*\
  !*** ./app/hooks/useGame.ts ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useGame: () => (/* binding */ useGame)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/../../node_modules/.pnpm/next@15.3.2_@babel+core@7.2_d32cf3ae86630254ac5edcd85152c69f/node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! shared-2048-logic/utils/moveLogic */ \"(app-pages-browser)/../../packages/shared-2048-logic/src/utils/moveLogic.ts\");\n/* harmony import */ var shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! shared-2048-logic/utils/gameLogic */ \"(app-pages-browser)/../../packages/shared-2048-logic/src/utils/gameLogic.ts\");\n/* harmony import */ var shared_2048_logic_utils_seededRandom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! shared-2048-logic/utils/seededRandom */ \"(app-pages-browser)/../../packages/shared-2048-logic/src/utils/seededRandom.ts\");\n/* __next_internal_client_entry_do_not_use__ useGame auto */ \n\n\n\nfunction findNewTile(before, after) {\n    const beforeIds = new Set(before.map((tile)=>tile.id));\n    return after.find((tile)=>!beforeIds.has(tile.id)) || null;\n}\nconst loadBestScore = ()=>{\n    const saved = localStorage.getItem('bestScore');\n    return saved ? Number(saved) : 0;\n};\nconst useGame = ()=>{\n    const [score, setScore] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [moves, setMoves] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [bestScore, setBestScore] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [tiles, setTiles] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [gameOver, setGameOver] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [undoHistory, setUndoHistory] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [undosLeft, setUndosLeft] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [maxUndos] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(2);\n    const [moveHistory, setMoveHistory] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [seed, setSeed] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n    const rngRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const isMoving = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const resumeGame = (gameState)=>{\n        setMoves(gameState.moves);\n        setScore(gameState.score);\n        setUndosLeft(gameState.undosLeft);\n        setTiles(gameState.tiles);\n        setGameOver(gameState.gameOver);\n        setUndoHistory(gameState.undoHistory);\n        setSeed(gameState.seed);\n        const savedScore = loadBestScore();\n        if (savedScore) setBestScore(Number(savedScore));\n    };\n    const resetGame = ()=>{\n        localStorage.setItem(\"gameState\", '{}');\n        const [seed, rng] = (0,shared_2048_logic_utils_seededRandom__WEBPACK_IMPORTED_MODULE_3__.generateSeed)();\n        setSeed(seed);\n        setMoves(0);\n        setScore(0);\n        setUndosLeft(maxUndos);\n        const { tiles, initialTiles } = (0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.initializeBoard)(seed);\n        setTiles(tiles);\n        setMoveHistory(initialTiles.map((tile)=>({\n                type: 'init',\n                move: undefined,\n                spawnedTile: tile\n            })));\n        setGameOver(false);\n        setUndoHistory([]);\n        const savedScore = loadBestScore();\n        if (savedScore) setBestScore(Number(savedScore));\n    };\n    const handleUndo = ()=>{\n        if (undosLeft === 0 || undoHistory.length === 0) return;\n        const lastState = undoHistory[undoHistory.length - 1];\n        setTiles(lastState.tiles);\n        setScore(lastState.score);\n        setMoves(lastState.moves);\n        setUndoHistory((prev)=>prev.slice(0, -1));\n        setMoveHistory((prev)=>prev.slice(0, -1));\n        setUndosLeft((u)=>u - 1);\n        setGameOver(false);\n    };\n    const handleMove = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useGame.useCallback[handleMove]\": (direction)=>{\n            if (isMoving.current) return;\n            if (gameOver) return;\n            isMoving.current = true;\n            const cleanedTiles = (0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.cleanUpTiles)(tiles);\n            let result;\n            const previousState = {\n                tiles: [\n                    ...tiles\n                ],\n                score,\n                moves\n            };\n            switch(direction){\n                case 'up':\n                case 'w':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveUp)(cleanedTiles);\n                    break;\n                case 'down':\n                case 's':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveDown)(cleanedTiles);\n                    break;\n                case 'left':\n                case 'a':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveLeft)(cleanedTiles);\n                    break;\n                case 'right':\n                case 'd':\n                    result = (0,shared_2048_logic_utils_moveLogic__WEBPACK_IMPORTED_MODULE_1__.moveRight)(cleanedTiles);\n                    break;\n                default:\n                    return;\n            }\n            if (result.moved) {\n                const hasNew128 = result.tiles.some({\n                    \"useGame.useCallback[handleMove].hasNew128\": (t)=>t.value === 128 && t.isMerged\n                }[\"useGame.useCallback[handleMove].hasNew128\"]);\n                if (hasNew128) {\n                    setUndosLeft({\n                        \"useGame.useCallback[handleMove]\": (prev)=>Math.min(prev + 1, maxUndos)\n                    }[\"useGame.useCallback[handleMove]\"]);\n                }\n                setUndoHistory({\n                    \"useGame.useCallback[handleMove]\": (prev)=>{\n                        const newHistory = [\n                            ...prev,\n                            previousState\n                        ];\n                        return newHistory.slice(-maxUndos); // Keep only last 2 moves\n                    }\n                }[\"useGame.useCallback[handleMove]\"]);\n                setMoves({\n                    \"useGame.useCallback[handleMove]\": (m)=>m + 1\n                }[\"useGame.useCallback[handleMove]\"]);\n                setScore({\n                    \"useGame.useCallback[handleMove]\": (s)=>{\n                        const newScore = s + result.score;\n                        if (newScore > bestScore) {\n                            setBestScore(newScore);\n                            localStorage.setItem('bestScore', newScore.toString());\n                        }\n                        return newScore;\n                    }\n                }[\"useGame.useCallback[handleMove]\"]);\n                // const rng = getRng(seed);\n                const withNewTile = (0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.generateRandomTile)(result.tiles, rngRef);\n                // Track the new tile if it was generated\n                setTiles(withNewTile);\n                // Check game over after move\n                if ((0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.isGameOver)(withNewTile)) {\n                    setGameOver(true);\n                }\n                const spawnedTile = findNewTile(result.tiles, withNewTile);\n                if (spawnedTile) {\n                    setMoveHistory({\n                        \"useGame.useCallback[handleMove]\": (prev)=>[\n                                ...prev,\n                                {\n                                    type: 'move',\n                                    move: direction,\n                                    spawnedTile: spawnedTile\n                                }\n                            ]\n                    }[\"useGame.useCallback[handleMove]\"]);\n                }\n                isMoving.current = false;\n            } else {\n                if ((0,shared_2048_logic_utils_gameLogic__WEBPACK_IMPORTED_MODULE_2__.isGameOver)(cleanedTiles)) {\n                    setGameOver(true);\n                }\n                isMoving.current = false;\n            }\n        }\n    }[\"useGame.useCallback[handleMove]\"], [\n        tiles,\n        bestScore,\n        moves,\n        maxUndos\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            if (seed) {\n                rngRef.current = (0,shared_2048_logic_utils_seededRandom__WEBPACK_IMPORTED_MODULE_3__.getRng)(seed);\n            }\n        }\n    }[\"useGame.useEffect\"], [\n        seed\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const handleKeyDown = {\n                \"useGame.useEffect.handleKeyDown\": (e)=>{\n                    if (![\n                        'ArrowUp',\n                        'ArrowDown',\n                        'ArrowLeft',\n                        'ArrowRight',\n                        'w',\n                        's',\n                        'a',\n                        'd'\n                    ].includes(e.key)) return;\n                    e.preventDefault();\n                    handleMove(e.key.replace('Arrow', '').toLowerCase());\n                }\n            }[\"useGame.useEffect.handleKeyDown\"];\n            window.addEventListener('keydown', handleKeyDown);\n            return ({\n                \"useGame.useEffect\": ()=>window.removeEventListener('keydown', handleKeyDown)\n            })[\"useGame.useEffect\"];\n        }\n    }[\"useGame.useEffect\"], [\n        handleMove\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const savedState = localStorage.getItem('gameState');\n            if (!savedState) {\n                resetGame();\n                return;\n            }\n            if (savedState) {\n                const parsedObject = JSON.parse(savedState.toString());\n                if (parsedObject.score == 0) {\n                    resetGame();\n                    return;\n                }\n                resumeGame(parsedObject);\n            }\n        }\n    }[\"useGame.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const currentState = {\n                tiles: [\n                    ...tiles\n                ],\n                score,\n                moves,\n                undosLeft,\n                undoHistory,\n                gameOver,\n                seed\n            };\n            if (currentState.score > 0) localStorage.setItem('gameState', JSON.stringify(currentState));\n        }\n    }[\"useGame.useEffect\"], [\n        tiles,\n        score,\n        moves,\n        undoHistory,\n        undosLeft,\n        gameOver\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            const savedHistory = localStorage.getItem('moveHistory');\n            if (savedHistory) {\n                setMoveHistory(JSON.parse(savedHistory));\n            }\n        }\n    }[\"useGame.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useGame.useEffect\": ()=>{\n            localStorage.setItem('moveHistory', JSON.stringify(moveHistory));\n        }\n    }[\"useGame.useEffect\"], [\n        moveHistory\n    ]);\n    return {\n        tiles,\n        score,\n        bestScore,\n        gameOver,\n        moves,\n        moveHistory,\n        seed,\n        handleUndo,\n        undosLeft,\n        resetGame\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0E7NkJBQUM7WUFDUnlCLGFBQWE2QixPQUFPLENBQUMsZUFBZTZDLEtBQUtHLFNBQVMsQ0FBQzFEO1FBQ3JEOzRCQUFHO1FBQUNBO0tBQVk7SUFHaEIsT0FBTztRQUNMVDtRQUNBTjtRQUNBSTtRQUNBSTtRQUNBTjtRQUNBYTtRQUNBRTtRQUNBZTtRQUNBcEI7UUFDQVk7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcRGVtZXRyaW9RXFxEZXNrdG9wXFxQcm9qZWN0c1xcMjA0OC1uZXh0LWV4cHJlc3NcXGFwcHNcXDIwNDgtbmV4dFxcYXBwXFxob29rc1xcdXNlR2FtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcclxuXHJcbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IG1vdmVVcCwgbW92ZURvd24sIG1vdmVMZWZ0LCBtb3ZlUmlnaHQgfSBmcm9tICdzaGFyZWQtMjA0OC1sb2dpYy91dGlscy9tb3ZlTG9naWMnO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplQm9hcmQsIGdlbmVyYXRlUmFuZG9tVGlsZSwgY2xlYW5VcFRpbGVzLCBpc0dhbWVPdmVyIH0gZnJvbSAnc2hhcmVkLTIwNDgtbG9naWMvdXRpbHMvZ2FtZUxvZ2ljJztcclxuaW1wb3J0IHsgR2FtZUhpc3RvcnksIFRpbGVNb3ZlLCBHYW1lU3RhdGUsIFRpbGVEYXRhIH0gZnJvbSAnc2hhcmVkLTIwNDgtbG9naWMvdHlwZXMnO1xyXG5pbXBvcnQgeyBnZW5lcmF0ZVNlZWQsIGdldFJuZyB9IGZyb20gJ3NoYXJlZC0yMDQ4LWxvZ2ljL3V0aWxzL3NlZWRlZFJhbmRvbSc7XHJcbmltcG9ydCBzZWVkcmFuZG9tIGZyb20gJ3NlZWRyYW5kb20nO1xyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gZmluZE5ld1RpbGUoYmVmb3JlOiBUaWxlRGF0YVtdLCBhZnRlcjogVGlsZURhdGFbXSk6IFRpbGVEYXRhIHwgbnVsbCB7XHJcbiAgY29uc3QgYmVmb3JlSWRzID0gbmV3IFNldChiZWZvcmUubWFwKHRpbGUgPT4gdGlsZS5pZCkpO1xyXG4gIHJldHVybiBhZnRlci5maW5kKHRpbGUgPT4gIWJlZm9yZUlkcy5oYXModGlsZS5pZCkpIHx8IG51bGw7XHJcbn1cclxuXHJcbmNvbnN0IGxvYWRCZXN0U2NvcmUgPSAoKSA9PiB7XHJcbiAgY29uc3Qgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJyk7XHJcbiAgcmV0dXJuIHNhdmVkID8gTnVtYmVyKHNhdmVkKSA6IDA7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3QgdXNlR2FtZSA9ICgpID0+IHtcclxuXHJcbiAgY29uc3QgW3Njb3JlLCBzZXRTY29yZV0gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBbbW92ZXMsIHNldE1vdmVzXSA9IHVzZVN0YXRlKDApO1xyXG4gIGNvbnN0IFtiZXN0U2NvcmUsIHNldEJlc3RTY29yZV0gPSB1c2VTdGF0ZSgwKTtcclxuICBjb25zdCBbdGlsZXMsIHNldFRpbGVzXSA9IHVzZVN0YXRlPFRpbGVEYXRhW10+KFtdKTtcclxuICBjb25zdCBbZ2FtZU92ZXIsIHNldEdhbWVPdmVyXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbdW5kb0hpc3RvcnksIHNldFVuZG9IaXN0b3J5XSA9IHVzZVN0YXRlPEdhbWVIaXN0b3J5W10+KFtdKTtcclxuICBjb25zdCBbdW5kb3NMZWZ0LCBzZXRVbmRvc0xlZnRdID0gdXNlU3RhdGUoMCk7XHJcbiAgY29uc3QgW21heFVuZG9zXSA9IHVzZVN0YXRlKDIpO1xyXG4gIGNvbnN0IFttb3ZlSGlzdG9yeSwgc2V0TW92ZUhpc3RvcnldID0gdXNlU3RhdGU8VGlsZU1vdmVbXT4oW10pO1xyXG4gIGNvbnN0IFtzZWVkLCBzZXRTZWVkXSA9IHVzZVN0YXRlKCcnKTtcclxuICBjb25zdCBybmdSZWYgPSB1c2VSZWY8c2VlZHJhbmRvbS5QUk5HIHwgbnVsbD4obnVsbCk7XHJcblxyXG4gIGNvbnN0IGlzTW92aW5nID0gdXNlUmVmKGZhbHNlKTtcclxuXHJcblxyXG4gIGNvbnN0IHJlc3VtZUdhbWUgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUpID0+IHtcclxuICAgIHNldE1vdmVzKGdhbWVTdGF0ZS5tb3Zlcyk7XHJcbiAgICBzZXRTY29yZShnYW1lU3RhdGUuc2NvcmUpO1xyXG4gICAgc2V0VW5kb3NMZWZ0KGdhbWVTdGF0ZS51bmRvc0xlZnQpO1xyXG4gICAgc2V0VGlsZXMoZ2FtZVN0YXRlLnRpbGVzKTtcclxuICAgIHNldEdhbWVPdmVyKGdhbWVTdGF0ZS5nYW1lT3Zlcik7XHJcbiAgICBzZXRVbmRvSGlzdG9yeShnYW1lU3RhdGUudW5kb0hpc3RvcnkpO1xyXG4gICAgc2V0U2VlZChnYW1lU3RhdGUuc2VlZCk7XHJcbiAgICBjb25zdCBzYXZlZFNjb3JlID0gbG9hZEJlc3RTY29yZSgpO1xyXG4gICAgaWYgKHNhdmVkU2NvcmUpIHNldEJlc3RTY29yZShOdW1iZXIoc2F2ZWRTY29yZSkpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgcmVzZXRHYW1lID0gKCkgPT4ge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJnYW1lU3RhdGVcIiwgJ3t9JylcclxuICAgIGNvbnN0IFtzZWVkLCBybmddID0gZ2VuZXJhdGVTZWVkKCk7XHJcbiAgICBzZXRTZWVkKHNlZWQpXHJcbiAgICBzZXRNb3ZlcygwKTtcclxuICAgIHNldFNjb3JlKDApO1xyXG4gICAgc2V0VW5kb3NMZWZ0KG1heFVuZG9zKTtcclxuICAgIGNvbnN0IHsgdGlsZXMsIGluaXRpYWxUaWxlcyB9ID0gaW5pdGlhbGl6ZUJvYXJkKHNlZWQpO1xyXG4gICAgc2V0VGlsZXModGlsZXMpO1xyXG4gICAgc2V0TW92ZUhpc3RvcnkoaW5pdGlhbFRpbGVzLm1hcCh0aWxlID0+ICh7XHJcbiAgICAgIHR5cGU6ICdpbml0JyxcclxuICAgICAgbW92ZTogdW5kZWZpbmVkLFxyXG4gICAgICBzcGF3bmVkVGlsZTogdGlsZVxyXG4gICAgfSBhcyBUaWxlTW92ZSkpKTtcclxuXHJcbiAgICBzZXRHYW1lT3ZlcihmYWxzZSk7XHJcbiAgICBzZXRVbmRvSGlzdG9yeShbXSk7XHJcbiAgICBjb25zdCBzYXZlZFNjb3JlID0gbG9hZEJlc3RTY29yZSgpO1xyXG4gICAgaWYgKHNhdmVkU2NvcmUpIHNldEJlc3RTY29yZShOdW1iZXIoc2F2ZWRTY29yZSkpO1xyXG5cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVVbmRvID0gKCkgPT4ge1xyXG4gICAgaWYgKHVuZG9zTGVmdCA9PT0gMCB8fCB1bmRvSGlzdG9yeS5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbiAgICBjb25zdCBsYXN0U3RhdGUgPSB1bmRvSGlzdG9yeVt1bmRvSGlzdG9yeS5sZW5ndGggLSAxXTtcclxuICAgIHNldFRpbGVzKGxhc3RTdGF0ZS50aWxlcyk7XHJcbiAgICBzZXRTY29yZShsYXN0U3RhdGUuc2NvcmUpO1xyXG4gICAgc2V0TW92ZXMobGFzdFN0YXRlLm1vdmVzKTtcclxuICAgIHNldFVuZG9IaXN0b3J5KHByZXYgPT4gcHJldi5zbGljZSgwLCAtMSkpO1xyXG4gICAgc2V0TW92ZUhpc3RvcnkocHJldiA9PiBwcmV2LnNsaWNlKDAsIC0xKSk7XHJcbiAgICBzZXRVbmRvc0xlZnQodSA9PiB1IC0gMSk7XHJcbiAgICBzZXRHYW1lT3ZlcihmYWxzZSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlTW92ZSA9IHVzZUNhbGxiYWNrKChkaXJlY3Rpb246IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKGlzTW92aW5nLmN1cnJlbnQpIHJldHVybjtcclxuICAgIGlmIChnYW1lT3ZlcikgcmV0dXJuO1xyXG5cclxuICAgIGlzTW92aW5nLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgY29uc3QgY2xlYW5lZFRpbGVzID0gY2xlYW5VcFRpbGVzKHRpbGVzKTtcclxuICAgIGxldCByZXN1bHQ6IGFueTtcclxuXHJcbiAgICBjb25zdCBwcmV2aW91c1N0YXRlOiBHYW1lSGlzdG9yeSA9IHtcclxuICAgICAgdGlsZXM6IFsuLi50aWxlc10sXHJcbiAgICAgIHNjb3JlLFxyXG4gICAgICBtb3ZlcyxcclxuICAgIH07XHJcblxyXG4gICAgc3dpdGNoIChkaXJlY3Rpb24pIHtcclxuICAgICAgY2FzZSAndXAnOiBjYXNlICd3JzogcmVzdWx0ID0gbW92ZVVwKGNsZWFuZWRUaWxlcyk7IGJyZWFrO1xyXG4gICAgICBjYXNlICdkb3duJzogY2FzZSAncyc6IHJlc3VsdCA9IG1vdmVEb3duKGNsZWFuZWRUaWxlcyk7IGJyZWFrO1xyXG4gICAgICBjYXNlICdsZWZ0JzogY2FzZSAnYSc6IHJlc3VsdCA9IG1vdmVMZWZ0KGNsZWFuZWRUaWxlcyk7IGJyZWFrO1xyXG4gICAgICBjYXNlICdyaWdodCc6IGNhc2UgJ2QnOiByZXN1bHQgPSBtb3ZlUmlnaHQoY2xlYW5lZFRpbGVzKTsgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6IHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzdWx0Lm1vdmVkKSB7XHJcbiAgICAgIGNvbnN0IGhhc05ldzEyOCA9IHJlc3VsdC50aWxlcy5zb21lKCh0OiBUaWxlRGF0YSkgPT5cclxuICAgICAgICB0LnZhbHVlID09PSAxMjggJiYgdC5pc01lcmdlZFxyXG4gICAgICApO1xyXG4gICAgICBpZiAoaGFzTmV3MTI4KSB7XHJcbiAgICAgICAgc2V0VW5kb3NMZWZ0KHByZXYgPT4gTWF0aC5taW4ocHJldiArIDEsIG1heFVuZG9zKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNldFVuZG9IaXN0b3J5KHByZXYgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld0hpc3RvcnkgPSBbLi4ucHJldiwgcHJldmlvdXNTdGF0ZV07XHJcbiAgICAgICAgcmV0dXJuIG5ld0hpc3Rvcnkuc2xpY2UoLW1heFVuZG9zKTsgLy8gS2VlcCBvbmx5IGxhc3QgMiBtb3Zlc1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNldE1vdmVzKG0gPT4gbSArIDEpXHJcblxyXG4gICAgICBzZXRTY29yZShzID0+IHtcclxuICAgICAgICBjb25zdCBuZXdTY29yZSA9IHMgKyByZXN1bHQuc2NvcmU7XHJcbiAgICAgICAgaWYgKG5ld1Njb3JlID4gYmVzdFNjb3JlKSB7XHJcbiAgICAgICAgICBzZXRCZXN0U2NvcmUobmV3U2NvcmUpO1xyXG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Jlc3RTY29yZScsIG5ld1Njb3JlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3U2NvcmU7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gY29uc3Qgcm5nID0gZ2V0Um5nKHNlZWQpO1xyXG4gICAgICBjb25zdCB3aXRoTmV3VGlsZSA9IGdlbmVyYXRlUmFuZG9tVGlsZShyZXN1bHQudGlsZXMsIHJuZ1JlZik7XHJcbiAgICAgIC8vIFRyYWNrIHRoZSBuZXcgdGlsZSBpZiBpdCB3YXMgZ2VuZXJhdGVkXHJcbiAgICAgIHNldFRpbGVzKHdpdGhOZXdUaWxlKTtcclxuICAgICAgLy8gQ2hlY2sgZ2FtZSBvdmVyIGFmdGVyIG1vdmVcclxuICAgICAgaWYgKGlzR2FtZU92ZXIod2l0aE5ld1RpbGUpKSB7XHJcbiAgICAgICAgc2V0R2FtZU92ZXIodHJ1ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHNwYXduZWRUaWxlID0gZmluZE5ld1RpbGUocmVzdWx0LnRpbGVzLCB3aXRoTmV3VGlsZSk7XHJcbiAgICAgIGlmIChzcGF3bmVkVGlsZSkge1xyXG4gICAgICAgIHNldE1vdmVIaXN0b3J5KHByZXYgPT4gW1xyXG4gICAgICAgICAgLi4ucHJldixcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogJ21vdmUnLFxyXG4gICAgICAgICAgICBtb3ZlOiBkaXJlY3Rpb24gYXMgJ3VwJyB8ICdkb3duJyB8ICdsZWZ0JyB8ICdyaWdodCcsXHJcbiAgICAgICAgICAgIHNwYXduZWRUaWxlOiBzcGF3bmVkVGlsZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF0pO1xyXG4gICAgICB9XHJcblxyXG5cclxuICAgICAgaXNNb3ZpbmcuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGlzR2FtZU92ZXIoY2xlYW5lZFRpbGVzKSkge1xyXG4gICAgICAgIHNldEdhbWVPdmVyKHRydWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlzTW92aW5nLmN1cnJlbnQgPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgfSwgW3RpbGVzLCBiZXN0U2NvcmUsIG1vdmVzLCBtYXhVbmRvc10pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKHNlZWQpIHtcclxuICAgICAgcm5nUmVmLmN1cnJlbnQgPSBnZXRSbmcoc2VlZCk7XHJcbiAgICB9XHJcbiAgfSwgW3NlZWRdKTtcclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuICAgICAgaWYgKCFbJ0Fycm93VXAnLCAnQXJyb3dEb3duJywgJ0Fycm93TGVmdCcsICdBcnJvd1JpZ2h0JywgJ3cnLCAncycsICdhJywgJ2QnXS5pbmNsdWRlcyhlLmtleSkpIHJldHVybjtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBoYW5kbGVNb3ZlKGUua2V5LnJlcGxhY2UoJ0Fycm93JywgJycpLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7XHJcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcclxuICB9LCBbaGFuZGxlTW92ZV0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgY29uc3Qgc2F2ZWRTdGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnYW1lU3RhdGUnKTtcclxuICAgIGlmICghc2F2ZWRTdGF0ZSkge1xyXG4gICAgICByZXNldEdhbWUoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzYXZlZFN0YXRlKSB7XHJcbiAgICAgIGNvbnN0IHBhcnNlZE9iamVjdCA9IEpTT04ucGFyc2Uoc2F2ZWRTdGF0ZS50b1N0cmluZygpKSBhcyBHYW1lU3RhdGU7XHJcblxyXG4gICAgICBpZiAocGFyc2VkT2JqZWN0LnNjb3JlID09IDApIHtcclxuICAgICAgICByZXNldEdhbWUoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJlc3VtZUdhbWUocGFyc2VkT2JqZWN0KTtcclxuXHJcbiAgICB9XHJcblxyXG4gIH0sIFtdKTtcclxuXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBjdXJyZW50U3RhdGU6IEdhbWVTdGF0ZSA9IHtcclxuICAgICAgdGlsZXM6IFsuLi50aWxlc10sXHJcbiAgICAgIHNjb3JlLFxyXG4gICAgICBtb3ZlcyxcclxuICAgICAgdW5kb3NMZWZ0LFxyXG4gICAgICB1bmRvSGlzdG9yeSxcclxuICAgICAgZ2FtZU92ZXIsXHJcbiAgICAgIHNlZWQsXHJcbiAgICB9O1xyXG4gICAgaWYgKGN1cnJlbnRTdGF0ZS5zY29yZSA+IDApIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdnYW1lU3RhdGUnLCBKU09OLnN0cmluZ2lmeShjdXJyZW50U3RhdGUpKTtcclxuXHJcbiAgfSwgW3RpbGVzLCBzY29yZSwgbW92ZXMsIHVuZG9IaXN0b3J5LCB1bmRvc0xlZnQsIGdhbWVPdmVyXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBjb25zdCBzYXZlZEhpc3RvcnkgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbW92ZUhpc3RvcnknKTtcclxuICAgIGlmIChzYXZlZEhpc3RvcnkpIHtcclxuICAgICAgc2V0TW92ZUhpc3RvcnkoSlNPTi5wYXJzZShzYXZlZEhpc3RvcnkpKTtcclxuICAgIH1cclxuICB9LCBbXSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbW92ZUhpc3RvcnknLCBKU09OLnN0cmluZ2lmeShtb3ZlSGlzdG9yeSkpO1xyXG4gIH0sIFttb3ZlSGlzdG9yeV0pO1xyXG5cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHRpbGVzLFxyXG4gICAgc2NvcmUsXHJcbiAgICBiZXN0U2NvcmUsXHJcbiAgICBnYW1lT3ZlcixcclxuICAgIG1vdmVzLFxyXG4gICAgbW92ZUhpc3RvcnksXHJcbiAgICBzZWVkLFxyXG4gICAgaGFuZGxlVW5kbyxcclxuICAgIHVuZG9zTGVmdCxcclxuICAgIHJlc2V0R2FtZVxyXG4gIH07XHJcbn07Il0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJtb3ZlVXAiLCJtb3ZlRG93biIsIm1vdmVMZWZ0IiwibW92ZVJpZ2h0IiwiaW5pdGlhbGl6ZUJvYXJkIiwiZ2VuZXJhdGVSYW5kb21UaWxlIiwiY2xlYW5VcFRpbGVzIiwiaXNHYW1lT3ZlciIsImdlbmVyYXRlU2VlZCIsImdldFJuZyIsImZpbmROZXdUaWxlIiwiYmVmb3JlIiwiYWZ0ZXIiLCJiZWZvcmVJZHMiLCJTZXQiLCJtYXAiLCJ0aWxlIiwiaWQiLCJmaW5kIiwiaGFzIiwibG9hZEJlc3RTY29yZSIsInNhdmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIk51bWJlciIsInVzZUdhbWUiLCJzY29yZSIsInNldFNjb3JlIiwibW92ZXMiLCJzZXRNb3ZlcyIsImJlc3RTY29yZSIsInNldEJlc3RTY29yZSIsInRpbGVzIiwic2V0VGlsZXMiLCJnYW1lT3ZlciIsInNldEdhbWVPdmVyIiwidW5kb0hpc3RvcnkiLCJzZXRVbmRvSGlzdG9yeSIsInVuZG9zTGVmdCIsInNldFVuZG9zTGVmdCIsIm1heFVuZG9zIiwibW92ZUhpc3RvcnkiLCJzZXRNb3ZlSGlzdG9yeSIsInNlZWQiLCJzZXRTZWVkIiwicm5nUmVmIiwiaXNNb3ZpbmciLCJyZXN1bWVHYW1lIiwiZ2FtZVN0YXRlIiwic2F2ZWRTY29yZSIsInJlc2V0R2FtZSIsInNldEl0ZW0iLCJybmciLCJpbml0aWFsVGlsZXMiLCJ0eXBlIiwibW92ZSIsInVuZGVmaW5lZCIsInNwYXduZWRUaWxlIiwiaGFuZGxlVW5kbyIsImxlbmd0aCIsImxhc3RTdGF0ZSIsInByZXYiLCJzbGljZSIsInUiLCJoYW5kbGVNb3ZlIiwiZGlyZWN0aW9uIiwiY3VycmVudCIsImNsZWFuZWRUaWxlcyIsInJlc3VsdCIsInByZXZpb3VzU3RhdGUiLCJtb3ZlZCIsImhhc05ldzEyOCIsInNvbWUiLCJ0IiwidmFsdWUiLCJpc01lcmdlZCIsIk1hdGgiLCJtaW4iLCJuZXdIaXN0b3J5IiwibSIsInMiLCJuZXdTY29yZSIsInRvU3RyaW5nIiwid2l0aE5ld1RpbGUiLCJoYW5kbGVLZXlEb3duIiwiZSIsImluY2x1ZGVzIiwia2V5IiwicHJldmVudERlZmF1bHQiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNhdmVkU3RhdGUiLCJwYXJzZWRPYmplY3QiLCJKU09OIiwicGFyc2UiLCJjdXJyZW50U3RhdGUiLCJzdHJpbmdpZnkiLCJzYXZlZEhpc3RvcnkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/hooks/useGame.ts\n"));

/***/ })

});